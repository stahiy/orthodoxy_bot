# Настройка cron-задач для рассылки

Проект поддерживает раздельные cron-задачи для каждого типа рассылки.

## Доступные скрипты

### 1. `cron_holiday.php` - Рассылка праздников
Отправляет информацию о православных праздниках на текущий день.

**Использование:**
```bash
php cron_holiday.php
```

**Пример настройки cron (каждый день в 9:00):**
```cron
0 9 * * * /usr/bin/php /var/www/html/cron_holiday.php >> /var/log/bot_holiday.log 2>&1
```

### 2. `cron_bible.php` - Рассылка цитат из Библии
Отправляет случайную цитату из Библии всем подписчикам.

**Использование:**
```bash
php cron_bible.php
```

**Пример настройки cron (каждый день в 10:00):**
```cron
0 10 * * * /usr/bin/php /var/www/html/cron_bible.php >> /var/log/bot_bible.log 2>&1
```

### 3. `cron_saint.php` - Рассылка цитат святых
Отправляет случайную цитату святого всем подписчикам.

**Использование:**
```bash
php cron_saint.php
```

**Пример настройки cron (каждый день в 11:00):**
```cron
0 11 * * * /usr/bin/php /var/www/html/cron_saint.php >> /var/log/bot_saint.log 2>&1
```

## Пример полной настройки cron

Для ежедневной рассылки всех типов контента:

```cron
# Праздники - каждый день в 9:00
0 9 * * * /usr/bin/php /var/www/html/cron_holiday.php >> /var/log/bot_holiday.log 2>&1

# Цитаты из Библии - каждый день в 10:00
0 10 * * * /usr/bin/php /var/www/html/cron_bible.php >> /var/log/bot_bible.log 2>&1

# Цитаты святых - каждый день в 11:00
0 11 * * * /usr/bin/php /var/www/html/cron_saint.php >> /var/log/bot_saint.log 2>&1
```

## Архитектура

Все скрипты используют общий сервис `App\Lib\NewsletterService` для рассылки сообщений.

### Структура:
- `src/Lib/NewsletterService.php` - общий сервис для рассылки
- `cron_holiday.php` - скрипт рассылки праздников
- `cron_bible.php` - скрипт рассылки цитат из Библии
- `cron_saint.php` - скрипт рассылки цитат святых

### Преимущества разделения:
- ✅ Независимая настройка времени для каждого типа рассылки
- ✅ Возможность отключить отдельный тип рассылки без влияния на другие
- ✅ Упрощенная диагностика проблем (отдельные логи)
- ✅ Модульная архитектура

## Старый скрипт cron.php

Старый файл `cron.php` с флагами командной строки сохранен для обратной совместимости, но рекомендуется использовать новые раздельные скрипты.

